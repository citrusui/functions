#!/usr/bin/env bash

export UPDATE="update" # `shellcheck`: workaround for line 11
export UPGRADE="full-upgrade"

function update() {
  if [ "$(uname)" == "Darwin" ]; then
    sudo softwareupdate -ia # fetch latest updates from the Mac App Store
  elif [ "$(which apt)" ]; then
    echo ""
    echo "Running APT..."
    echo ""
    sudo apt $UPDATE # refresh package lists
    sudo apt $UPGRADE # install updated packages
  fi
  if [ $NVM_DIR ]; then
    echo ""
    echo "Running nvm..."
    echo ""
    nvm install stable # install the latest Node.js release
  fi
  if [ "$(which npm)" ]; then
    echo ""
    echo "Running npm..."
    echo ""
    npm update -g # update all global Node modules
  fi
  if [ "$(which apm)" ]; then
    echo ""
    echo "Running apm..."
    echo ""
    apm update # update Atom packages
  fi
}

export -f update
